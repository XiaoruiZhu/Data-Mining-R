---
title: "Regression Tree Models"
output: 
  html_document: 
    theme: readable
    fig_caption: yes
    number_sections: yes
    toc: yes
---

# **Exercise: How to interpret the tree model!** 

```{r echo=TRUE}
library(MASS) #this data is in MASS package
boston.data <- data(Boston)
sample_index <- sample(nrow(Boston),nrow(Boston)*0.90)
boston.train <- Boston[sample_index,]
boston.test <- Boston[-sample_index,]
library(rpart)
library(rpart.plot)
boston.rpart <- rpart(formula = medv ~ ., data = boston.train)
prp(boston.rpart,digits = 4, extra = 1)
```

> 1. Based on the tree model above, what is the predicted median housing price (in thousand) given following information:


```{r, echo=FALSE}
library(knitr)
kable(boston.test[10,], digits=2, row.names = F)
```

> 2. Calculate the mean squared error (MSE) of the in-sample for this tree model;


```{r echo=FALSE, eval=FALSE}
boston.train.pred.tree = predict(boston.rpart)
boston.test.pred.tree = predict(boston.rpart,boston.test)
MSE.tree <- mean((boston.train.pred.tree - boston.train$medv)^2)
MSPE.tree <- mean((boston.test.pred.tree - boston.test$medv)^2)
```

> 3. Compare this model's out-of-sample performance with the linear regression model with all variables in it.

```{r echo=FALSE, eval=FALSE}
boston.reg = lm(medv~., data = boston.train)
boston.test.pred.reg = predict(boston.reg, boston.test)
mean((boston.test.pred.reg - boston.test$medv)^2)
```

> 4. Comparing the performance (MSE, MSPE) of regression tree with linear regression model in terms of prediction error.

```{r, echo=FALSE, eval=FALSE}
boston.lm <- 
boston.train.pred.lm <- 
boston.test.pred.lm <- 
MSE.lm <- 
MSPE.lm <-
```

> 5. Prune a classification tree. Start with "cp=0.001", and find a reasonable cp value, then obtain the pruned tree.

[go to top](#header)

